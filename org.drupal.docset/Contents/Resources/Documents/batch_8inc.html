<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Drupal: includes/batch.inc File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Drupal
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">includes/batch.inc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a43cd9cb0044756355a8e3c68356fbb16"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a43cd9cb0044756355a8e3c68356fbb16">batch_load</a> ($id)</td></tr>
<tr class="memitem:a5535c7cfeae572bda2c11f3e597a55b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a5535c7cfeae572bda2c11f3e597a55b6">_batch_page</a> ()</td></tr>
<tr class="memitem:a1d38b90eeddc5da76b02e87fb6158ed1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a1d38b90eeddc5da76b02e87fb6158ed1">_batch_start</a> ()</td></tr>
<tr class="memitem:ac8152d29181479967c4bdc7e0caf920e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#ac8152d29181479967c4bdc7e0caf920e">_batch_progress_page_js</a> ()</td></tr>
<tr class="memitem:a200def74deec79748ee5accf5117db6d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a200def74deec79748ee5accf5117db6d">_batch_do</a> ()</td></tr>
<tr class="memitem:ab233b667c1237a8e177e1e6aa1b890ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#ab233b667c1237a8e177e1e6aa1b890ba">_batch_progress_page_nojs</a> ()</td></tr>
<tr class="memitem:af411ff0cae660684809c5f6a8dbc0353"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#af411ff0cae660684809c5f6a8dbc0353">_batch_process</a> ()</td></tr>
<tr class="memitem:a0e08303b9f24da1acff2fd1b41a7bc32"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a0e08303b9f24da1acff2fd1b41a7bc32">_batch_api_percentage</a> ($total, $current)</td></tr>
<tr class="memitem:a1a536764a1a9bf283bcceddc03b462d7"><td class="memItemLeft" align="right" valign="top">&amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a1a536764a1a9bf283bcceddc03b462d7">_batch_current_set</a> ()</td></tr>
<tr class="memitem:a48dd7f59b745d8e01fce39996d0c826e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a48dd7f59b745d8e01fce39996d0c826e">_batch_next_set</a> ()</td></tr>
<tr class="memitem:a7e7b4cbc351842ca1b27cc780b0f219b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a7e7b4cbc351842ca1b27cc780b0f219b">_batch_finished</a> ()</td></tr>
<tr class="memitem:a85d830f44fb762da6e9fdb838180c85f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="batch_8inc.html#a85d830f44fb762da6e9fdb838180c85f">_batch_shutdown</a> ()</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Batch processing API for processes to run in multiple HTTP requests.</p>
<p>Note that batches are usually invoked by form submissions, which is why the core interaction functions of the batch processing API live in <a class="el" href="form_8inc.html">form.inc</a>.</p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="form_8inc.html">form.inc</a> </dd>
<dd>
<a class="el" href="group__batch.html#ga9ff3f18b3bdd1d62ab7ac681a22a7170">batch_set()</a> </dd>
<dd>
<a class="el" href="group__batch.html#gab17f59692632a482cee4f65f27d082f7">batch_process()</a> </dd>
<dd>
<a class="el" href="group__batch.html#ga971f5246c6e8e536d0b20529fb2e2638">batch_get()</a> </dd></dl>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a0e08303b9f24da1acff2fd1b41a7bc32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="batch_8inc.html#a0e08303b9f24da1acff2fd1b41a7bc32">_batch_api_percentage</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>total</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>current</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Formats the percent completion for a batch set.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">$total</td><td>The total number of operations. </td></tr>
    <tr><td class="paramname">$current</td><td>The number of the current operation. This may be a floating point number rather than an integer in the case of a multi-step operation that is not yet complete; in that case, the fractional part of $current represents the fraction of the operation that has been completed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The properly formatted percentage, as a string. We output percentages using the correct number of decimal places so that we never print "100%" until we are finished, but we also never print more decimal places than are meaningful.</dd></dl>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="batch_8inc.html#af411ff0cae660684809c5f6a8dbc0353">_batch_process()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a1a536764a1a9bf283bcceddc03b462d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">&amp; <a class="el" href="batch_8inc.html#a1a536764a1a9bf283bcceddc03b462d7">_batch_current_set</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the batch set being currently processed. </p>

</div>
</div>
<a class="anchor" id="a200def74deec79748ee5accf5117db6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="batch_8inc.html#a200def74deec79748ee5accf5117db6d">_batch_do</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Does one execution pass with JavaScript and returns progress to the browser.</p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="batch_8inc.html#ac8152d29181479967c4bdc7e0caf920e">_batch_progress_page_js()</a> </dd>
<dd>
<a class="el" href="batch_8inc.html#af411ff0cae660684809c5f6a8dbc0353">_batch_process()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a7e7b4cbc351842ca1b27cc780b0f219b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="batch_8inc.html#a7e7b4cbc351842ca1b27cc780b0f219b">_batch_finished</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ends the batch processing.</p>
<p>Call the 'finished' callback of each batch set to allow custom handling of the results and resolve page redirection. </p>

</div>
</div>
<a class="anchor" id="a48dd7f59b745d8e01fce39996d0c826e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="batch_8inc.html#a48dd7f59b745d8e01fce39996d0c826e">_batch_next_set</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieves the next set in a batch.</p>
<p>If there is a subsequent set in this batch, assign it as the new set to process and execute its form submit handler (if defined), which may add further sets to this batch.</p>
<dl class="section return"><dt>Returns:</dt><dd>TRUE if a subsequent set was found in the batch. </dd></dl>

</div>
</div>
<a class="anchor" id="a5535c7cfeae572bda2c11f3e597a55b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="batch_8inc.html#a5535c7cfeae572bda2c11f3e597a55b6">_batch_page</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Renders the batch processing page based on the current state of the batch.</p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="batch_8inc.html#a85d830f44fb762da6e9fdb838180c85f">_batch_shutdown()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="af411ff0cae660684809c5f6a8dbc0353"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="batch_8inc.html#af411ff0cae660684809c5f6a8dbc0353">_batch_process</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Processes sets in a batch.</p>
<p>If the batch was marked for progressive execution (default), this executes as many operations in batch sets until an execution time of 1 second has been exceeded. It will continue with the next operation of the same batch set in the next request.</p>
<dl class="section return"><dt>Returns:</dt><dd>An array containing a completion value (in percent) and a status message. </dd></dl>

</div>
</div>
<a class="anchor" id="ac8152d29181479967c4bdc7e0caf920e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="batch_8inc.html#ac8152d29181479967c4bdc7e0caf920e">_batch_progress_page_js</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Outputs a batch processing page with JavaScript support.</p>
<p>This initializes the batch and error messages. Note that in JavaScript-based processing, the batch processing page is displayed only once and updated via AHAH requests, so only the first batch set gets to define the page title. Titles specified by subsequent batch sets are not displayed.</p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="group__batch.html#ga9ff3f18b3bdd1d62ab7ac681a22a7170">batch_set()</a> </dd>
<dd>
<a class="el" href="batch_8inc.html#a200def74deec79748ee5accf5117db6d">_batch_do()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ab233b667c1237a8e177e1e6aa1b890ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="batch_8inc.html#ab233b667c1237a8e177e1e6aa1b890ba">_batch_progress_page_nojs</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Outputs a batch processing page without JavaScript support.</p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="batch_8inc.html#af411ff0cae660684809c5f6a8dbc0353">_batch_process()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a85d830f44fb762da6e9fdb838180c85f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="batch_8inc.html#a85d830f44fb762da6e9fdb838180c85f">_batch_shutdown</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Shutdown function: Stores the current batch data for the next request.</p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="batch_8inc.html#a5535c7cfeae572bda2c11f3e597a55b6">_batch_page()</a> </dd>
<dd>
<a class="el" href="group__php__wrappers.html#gac7eaf11b49995f7f539f5c830a65b34f">drupal_register_shutdown_function()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a1d38b90eeddc5da76b02e87fb6158ed1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="batch_8inc.html#a1d38b90eeddc5da76b02e87fb6158ed1">_batch_start</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the batch processing.</p>
<p>JavaScript-enabled clients are identified by the 'has_js' cookie set in drupal.js. If no JavaScript-enabled page has been visited during the current user's browser session, the non-JavaScript version is returned. </p>

</div>
</div>
<a class="anchor" id="a43cd9cb0044756355a8e3c68356fbb16"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="batch_8inc.html#a43cd9cb0044756355a8e3c68356fbb16">batch_load</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads a batch from the database.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">$id</td><td>The ID of the batch to load. When a progressive batch is being processed, the relevant ID is found in $_REQUEST['id'].</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>An array representing the batch, or FALSE if no batch was found. </dd></dl>

</div>
</div>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Sun May 13 2012 05:35:54 for Drupal by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
