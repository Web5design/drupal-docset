<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Drupal: MemoryQueue Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Drupal
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">MemoryQueue Class Reference<div class="ingroups"><a class="el" href="group__queue.html">Queue operations</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for MemoryQueue:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_memory_queue.png" usemap="#MemoryQueue_map" alt=""/>
  <map id="MemoryQueue_map" name="MemoryQueue_map">
<area href="interface_drupal_queue_interface.html" alt="DrupalQueueInterface" shape="rect" coords="0,0,138,24"/>
<area href="class_batch_memory_queue.html" alt="BatchMemoryQueue" shape="rect" coords="0,112,138,136"/>
</map>
 </div></div>

<p><a href="class_memory_queue-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a83e620eced2895763ebad69f615462b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_memory_queue.html#a83e620eced2895763ebad69f615462b2">__construct</a> ($name)</td></tr>
<tr class="memitem:a5d8fe8085407a1a77c505ba8532b9c50"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_memory_queue.html#a5d8fe8085407a1a77c505ba8532b9c50">createItem</a> ($data)</td></tr>
<tr class="memitem:a266edfebcf6567707f3e2dafc3200491"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_memory_queue.html#a266edfebcf6567707f3e2dafc3200491">numberOfItems</a> ()</td></tr>
<tr class="memitem:a24cba156a854a7b4b6c81c3d2614508d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_memory_queue.html#a24cba156a854a7b4b6c81c3d2614508d">claimItem</a> ($lease_time=30)</td></tr>
<tr class="memitem:a3091327204bb8b2e9c13baf32142f7f5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_memory_queue.html#a3091327204bb8b2e9c13baf32142f7f5">deleteItem</a> ($item)</td></tr>
<tr class="memitem:ad835863a58ca48f31f8cb1e3807b88cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_memory_queue.html#ad835863a58ca48f31f8cb1e3807b88cf">releaseItem</a> ($item)</td></tr>
<tr class="memitem:a94e1da7e8b4cccb445acb8500e0b39a5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_memory_queue.html#a94e1da7e8b4cccb445acb8500e0b39a5">createQueue</a> ()</td></tr>
<tr class="memitem:a055cd4bf4b319accf5ffa2c6f22685f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_memory_queue.html#a055cd4bf4b319accf5ffa2c6f22685f1">deleteQueue</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a7c2d4dee239a697d91541bc1ad580eb4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7c2d4dee239a697d91541bc1ad580eb4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$queue</b></td></tr>
<tr class="memitem:aead361610d119b99b7e9f11fd46e008a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aead361610d119b99b7e9f11fd46e008a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$id_sequence</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Static queue implementation.</p>
<p>This allows "undelayed" variants of processes relying on the Queue interface. The queue data resides in memory. It should only be used for items that will be queued and dequeued within a given page request. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a83e620eced2895763ebad69f615462b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_memory_queue.html#a83e620eced2895763ebad69f615462b2">MemoryQueue::__construct</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Start working with a queue.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">$name</td><td>Arbitrary string. The name of the queue to work with. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interface_drupal_queue_interface.html#af292a6582400c223b3e87b61bdf9e8e2">DrupalQueueInterface</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a24cba156a854a7b4b6c81c3d2614508d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_memory_queue.html#a24cba156a854a7b4b6c81c3d2614508d">MemoryQueue::claimItem</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>lease_time</em> = <code>30</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Claim an item in the queue for processing.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">$lease_time</td><td>How long the processing is expected to take in seconds, defaults to an hour. After this lease expires, the item will be reset and another consumer can claim the item. For idempotent tasks (which can be run multiple times without side effects), shorter lease times would result in lower latency in case a consumer fails. For tasks that should not be run more than once (non-idempotent), a larger lease time will make it more rare for a given task to run multiple times in cases of failure, at the cost of higher latency. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>On success we return an item object. If the queue is unable to claim an item it returns false. This implies a best effort to retrieve an item and either the queue is empty or there is some other non-recoverable problem. </dd></dl>

<p>Implements <a class="el" href="interface_drupal_queue_interface.html#a2f0f2ccc1f4d55c0890897ea85e75954">DrupalQueueInterface</a>.</p>

<p>Reimplemented in <a class="el" href="class_batch_memory_queue.html#aca687797fff1fee4a86293e8c32190ad">BatchMemoryQueue</a>.</p>

</div>
</div>
<a class="anchor" id="a5d8fe8085407a1a77c505ba8532b9c50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_memory_queue.html#a5d8fe8085407a1a77c505ba8532b9c50">MemoryQueue::createItem</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add a queue item and store it directly to the queue.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">$data</td><td>Arbitrary data to be associated with the new task in the queue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>TRUE if the item was successfully created and was (best effort) added to the queue, otherwise FALSE. We don't guarantee the item was committed to disk etc, but as far as we know, the item is now in the queue. </dd></dl>

<p>Implements <a class="el" href="interface_drupal_queue_interface.html#a1bdef6341808aaf8b3de821b7b71f137">DrupalQueueInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a94e1da7e8b4cccb445acb8500e0b39a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_memory_queue.html#a94e1da7e8b4cccb445acb8500e0b39a5">MemoryQueue::createQueue</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a queue.</p>
<p>Called during installation and should be used to perform any necessary initialization operations. This should not be confused with the constructor for these objects, which is called every time an object is instantiated to operate on a queue. This operation is only needed the first time a given queue is going to be initialized (for example, to make a new database table or directory to hold tasks for the queue -- it depends on the queue implementation if this is necessary at all). </p>

<p>Implements <a class="el" href="interface_drupal_queue_interface.html#a5a657d8c1d5bb429b3e594fa0c883ad3">DrupalQueueInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a3091327204bb8b2e9c13baf32142f7f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_memory_queue.html#a3091327204bb8b2e9c13baf32142f7f5">MemoryQueue::deleteItem</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Delete a finished item from the queue.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">$item</td><td>The item returned by <a class="el" href="interface_drupal_queue_interface.html#a2f0f2ccc1f4d55c0890897ea85e75954">DrupalQueueInterface::claimItem()</a>. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interface_drupal_queue_interface.html#aa61212089c1bcc410e8f87f8e619e351">DrupalQueueInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a055cd4bf4b319accf5ffa2c6f22685f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_memory_queue.html#a055cd4bf4b319accf5ffa2c6f22685f1">MemoryQueue::deleteQueue</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Delete a queue and every item in the queue. </p>

<p>Implements <a class="el" href="interface_drupal_queue_interface.html#ad403fed96dbd86e64a8a48c33fe5f2bc">DrupalQueueInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a266edfebcf6567707f3e2dafc3200491"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_memory_queue.html#a266edfebcf6567707f3e2dafc3200491">MemoryQueue::numberOfItems</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieve the number of items in the queue.</p>
<p>This is intended to provide a "best guess" count of the number of items in the queue. Depending on the implementation and the setup, the accuracy of the results of this function may vary.</p>
<p>e.g. On a busy system with a large number of consumers and items, the result might only be valid for a fraction of a second and not provide an accurate representation.</p>
<dl class="section return"><dt>Returns:</dt><dd>An integer estimate of the number of items in the queue. </dd></dl>

<p>Implements <a class="el" href="interface_drupal_queue_interface.html#aee5a22d355c9e6246690d0ed79fe306b">DrupalQueueInterface</a>.</p>

</div>
</div>
<a class="anchor" id="ad835863a58ca48f31f8cb1e3807b88cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_memory_queue.html#ad835863a58ca48f31f8cb1e3807b88cf">MemoryQueue::releaseItem</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Release an item that the worker could not process, so another worker can come in and process it before the timeout expires.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">$item</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>boolean </dd></dl>

<p>Implements <a class="el" href="interface_drupal_queue_interface.html#a7f4ce9d592779327cd24dbf90566da67">DrupalQueueInterface</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>modules/system/<a class="el" href="system_8queue_8inc.html">system.queue.inc</a></li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Sun May 13 2012 05:35:58 for Drupal by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
