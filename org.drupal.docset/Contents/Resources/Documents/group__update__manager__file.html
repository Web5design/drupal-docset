<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Drupal: Update manager: file management</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Drupal
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Update manager: file management</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaacbdc92035b1bb68dbb741a4917b8185"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__update__manager__file.html#gaacbdc92035b1bb68dbb741a4917b8185">update_manager_archive_extract</a> ($file, $directory)</td></tr>
<tr class="memitem:ga8c352241e56ce6de6b1064725d84801b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__update__manager__file.html#ga8c352241e56ce6de6b1064725d84801b">update_manager_archive_verify</a> ($project, $archive_file, $directory)</td></tr>
<tr class="memitem:gaef701662a2b3a2bfff2c0b819860a547"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__update__manager__file.html#gaef701662a2b3a2bfff2c0b819860a547">update_manager_file_get</a> ($<a class="el" href="common_8inc.html#a43b2a0594431556db49df980801d8807">url</a>)</td></tr>
<tr class="memitem:gad7fdbc7766b87956b181eb5fbec9a609"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__update__manager__file.html#gad7fdbc7766b87956b181eb5fbec9a609">update_manager_batch_project_get</a> ($project, $<a class="el" href="common_8inc.html#a43b2a0594431556db49df980801d8807">url</a>, &amp;$context)</td></tr>
<tr class="memitem:ga88ed61885931bd3df617ca78b4fadb6c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__update__manager__file.html#ga88ed61885931bd3df617ca78b4fadb6c">update_manager_local_transfers_allowed</a> ()</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>End of "defgroup update_manager_install".</p>
<p>Update manager file management functions.</p>
<p>These functions are used by the update manager to copy, extract and verify archive files. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaacbdc92035b1bb68dbb741a4917b8185"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__update__manager__file.html#gaacbdc92035b1bb68dbb741a4917b8185">update_manager_archive_extract</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>directory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Unpack a downloaded archive file.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$project</td><td>The short name of the project to download. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$file</td><td>The filename of the archive you wish to extract. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$directory</td><td>The directory you wish to extract the archive into. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Archiver The Archiver object used to extract the archive. </dd></dl>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="class_exception.html">Exception</a></td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8c352241e56ce6de6b1064725d84801b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__update__manager__file.html#ga8c352241e56ce6de6b1064725d84801b">update_manager_archive_verify</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>project</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>archive_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>directory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Verify an archive after it has been downloaded and extracted.</p>
<p>This function is responsible for invoking <a class="el" href="group__hooks.html#ga68a5dd6bec824909f46d9458991eaf42">hook_verify_update_archive()</a>.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$project</td><td>The short name of the project to download. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$archive_file</td><td>The filename of the unextracted archive. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$directory</td><td>The directory that the archive was extracted into.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>array An array of error messages to display if the archive was invalid. If there are no errors, it will be an empty array. </dd></dl>

</div>
</div>
<a class="anchor" id="gad7fdbc7766b87956b181eb5fbec9a609"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__update__manager__file.html#gad7fdbc7766b87956b181eb5fbec9a609">update_manager_batch_project_get</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>project</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Batch operation: download, unpack, and verify a project.</p>
<p>This function assumes that the provided URL points to a file archive of some sort. The URL can have any scheme that we have a file stream wrapper to support. The file is downloaded to a local cache.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$project</td><td>The short name of the project to download. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$url</td><td>The URL to download a specific project release archive file. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$context</td><td>Reference to an array used for BatchAPI storage.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also:</dt><dd>update_manager_download_page() </dd></dl>

</div>
</div>
<a class="anchor" id="gaef701662a2b3a2bfff2c0b819860a547"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__update__manager__file.html#gaef701662a2b3a2bfff2c0b819860a547">update_manager_file_get</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>url</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Copies a file from $url to the temporary directory for updates.</p>
<p>If the file has already been downloaded, returns the the local path.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">$url</td><td>The URL of the file on the server.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>string Path to local file. </dd></dl>

</div>
</div>
<a class="anchor" id="ga88ed61885931bd3df617ca78b4fadb6c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__update__manager__file.html#ga88ed61885931bd3df617ca78b4fadb6c">update_manager_local_transfers_allowed</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Determines if file transfers will be performed locally.</p>
<p>If the server is configured such that webserver-created files have the same owner as the configuration directory (e.g. sites/default) where new code will eventually be installed, the Update manager can transfer files entirely locally, without changing their ownership (in other words, without prompting the user for FTP, SSH or other credentials).</p>
<p>This server configuration is an inherent security weakness because it allows a malicious webserver process to append arbitrary PHP code and then execute it. However, it is supported here because it is a common configuration on shared hosting, and there is nothing Drupal can do to prevent it.</p>
<dl class="section return"><dt>Returns:</dt><dd>TRUE if local file transfers are allowed on this server, or FALSE if not.</dd></dl>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="group__update__manager__update.html#gaeab4690bf95cb0d0b517a0b9161e5045">update_manager_update_ready_form_submit()</a> </dd>
<dd>
<a class="el" href="group__update__manager__install.html#ga52e9f2cddddddccf921284b01f9505b0">update_manager_install_form_submit()</a> </dd>
<dd>
<a class="el" href="install_8core_8inc.html#ae9175b59627ec291ef76fd241f74f33e">install_check_requirements()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Sun May 13 2012 05:35:56 for Drupal by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
